<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH-X: source/Grid/Grid_sortParticles.F90 File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../flash-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">FLASH-X
   </div>
   <div id="projectbrief">Doxygen Generated Documentation From Interface Source Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="../../dir_f636fe1aaafd6114c78ff18cf7dc516e.html">Grid</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle"><div class="title">Grid_sortParticles.F90 File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="../../db/d00/Grid__sortParticles_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a3617528704e1af9fabc9722e5d108037"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d00/Grid__sortParticles_8F90.html#a3617528704e1af9fabc9722e5d108037">Grid_sortParticles</a> (dataBuf, props, localCount, elementTypes, maxCount, elementsPerBlk, attrib1, attrib2)</td></tr>
<tr class="separator:a3617528704e1af9fabc9722e5d108037"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a3617528704e1af9fabc9722e5d108037" name="a3617528704e1af9fabc9722e5d108037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3617528704e1af9fabc9722e5d108037">&#9670;&nbsp;</a></span>Grid_sortParticles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine Grid_sortParticles </td>
          <td>(</td>
          <td class="paramtype">real&#160;</td>
          <td class="paramname"><em>dataBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>props</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>localCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>elementTypes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>maxCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>elementsPerBlk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>attrib1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, optional&#160;</td>
          <td class="paramname"><em>attrib2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Sorts the elements by block number. There are two types of blocknumber associated with elements data structures which have valid values, but are not valid blocknumber in the mesh. These are "UNKNOWN" and "NONEXISTENT". The sorter finds out the number of blocks on the current processor in the mesh, and puts all elements associated with blocknumbers in the range of 1 to localNumBlocks in the processor into the appropriate bins. In the bin for localNumBlocks+1 it puts all elements with block number = UNKNOWN, and in localNumBloks+2 it put all elements with block number = NONEXISTENT. For any other block number in the BLK_PART_PROP field of any element, the routine aborts.</p>
<p >dataBuf : List of elements. It is two dimensional real array, the first dimension represents each element's properties, and second dimension is index to elements.</p>
<p >props : number of properties of each element in the dataBuf datastructure</p>
<p >localCount : While coming in it contains the current number of elements mapped to this processor. After all the data structure movement, the number of local elements might change, and the new value is put back into it. elementTypes : Count of different types of elements in the simulation maxCount : This is parameter determined at runtime, and is the maximum number of local elements that a simulation expects to have. All the arrays that hold particles in the Particles unit are allocated based on this number.</p>
<p >elementsPerBlk : integer array containing number of elements on each blk. attrib1 : the primary property of the elements on which to sort them attrib2 : if present, then the elements are first sorted on attrib2, and then within each group with a given attrib2 value, on the attrib1.</p>
<p >NOTES currently this routine is called only by io_writeParticles in permanent guardcell mode, and by the routines that map mesh to particles CAUTION : This routine should not be called when " gr_ptSourceBuf" needs to have valid values since it is used as scratch space by this routine.</p>
<p >The algorithm used for sorting requires (and silently assumes) that o if attrib1 or attrib2 is block then for each element is either in the valid range 1..MAXBLOCKS, or has the special value NONEXISTENT; and o if the either attribute in particles is TYPE_PART_PROP property for each element, it is in the valid range 1..elementTypes. Elements with a block value of NONEXISTENT will be effectively dropped (by potentially reusing their storage locations for other elements, and by not counting them in the 'elementsPerBlk' output array), but this routine does *not* update the localCount counter; so the caller better take care of updating its view of the number of elements (probably from the information in 'elementsPerBlk') after Grid_sortElements returns, if some of the elements may be NONEXISTENT. </p>

<p class="definition">Definition at line <a class="el" href="../../db/d00/Grid__sortParticles_8F90_source.html#l00068">68</a> of file <a class="el" href="../../db/d00/Grid__sortParticles_8F90_source.html">Grid_sortParticles.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 4 2022 17:05:05 for FLASH-X by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
