<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Start &mdash; Flash-X 0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=7026087e"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview of Flash-X architecture" href="arch.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Flash-X
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="disclaimers.html">Current Status and Disclaimers</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#system-requirements">System requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#obtaining-and-configuring-flashx-for-quick-start">Obtaining and configuring Flash-X for quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-flashx">Running Flash-X</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="arch.html">Overview of Flash-X architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="orcha.html">The Performance Portability System</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">The Flash-X configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeadvance.html">TimeAdvance</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">Physics Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor.html">Monitor Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_section.html">Developer’s Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Flash-X</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quick Start</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start">
<span id="chp-quickstart"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h1>
<p>This chapter describes how to get up-and-running quickly with Flash-X
with an example simulation, the Sedov explosion. We explain how to
configure a problem, build it, run it, and examine the output.</p>
<section id="system-requirements">
<h2>System requirements<a class="headerlink" href="#system-requirements" title="Link to this heading"></a></h2>
<p>You should verify that you have the following:</p>
<ul class="simple">
<li><p>A copy of the Flash-X source code distribution. To obtain a copy of
the source code, please visit <a class="reference external" href="https://github.com/Flash-X">https://github.com/Flash-X</a> and request
access to the Flash-X repository as a collaborator.</p></li>
<li><p>A FORTRAN compiler, a C compiler, and a C++ compiler, and Python 3 or above.</p></li>
<li><p>An installed copy of the Message-Passing Interface (MPI) library, and
the HDF5 library.</p></li>
<li><p>To use AMReX  for AMR, it must be installed. AMReX  requires
a different version each for 1, 2 or 3 dimensional application
configurations. (for details see <a class="reference external" href="https://amrex-codes.github.io/amrex/docs_html/">https://amrex-codes.github.io/amrex/docs_html/</a>). Paramesh is included in the
source code.</p></li>
<li><p>AMReX is compatible with PETSc and Hypre math libraries, and
Paramesh is compatible with Hypre. To use either of these
libraries they must be installed on the platform and their
location should be made known to AMReX .</p></li>
<li><p>The GNU make utility</p></li>
<li><p>A copy of the Python language, version 3.0 or later is required.</p></li>
<li><p>If you wish to use ORCHA you need all the tools in it. These are
– Milhoja, CG-Kit and <a href="#id1"><span class="problematic" id="id2">|</span></a>flashx|_recipe Tools</p></li>
</ul>
</section>
<section id="obtaining-and-configuring-flashx-for-quick-start">
<span id="unpack"></span><h2>Obtaining and configuring Flash-X for quick start<a class="headerlink" href="#obtaining-and-configuring-flashx-for-quick-start" title="Link to this heading"></a></h2>
<p>To begin, clone the Flash-X source code distribution.</p>
<p>The code of the PARAMESH library for Flash-X is provided as a git
submodule by a separate code repository named PARAMESH-for-Flash-X.
After successful initialization of the submodule the code will
appear as a subtree under Grid/GridMain/AMR in the PM4_package
directory. The Flash-X setup and build mechanisms will take care
of compiling this code (if needed for a simulation configuration);
PARAMESH code is not organized or built as a separate library.</p>
<p>#Git with Submodules</p>
<p>To prepare for building simulations that use libraries whose code must be retrieved
from a separate git repository, the following modified <cite>git</cite> commands can be used:</p>
<ul class="simple">
<li><p><cite>git pull –recurse-submodules=yes</cite> (in place of the usual <cite>git pull</cite>)</p></li>
<li><p><cite>git submodule update –init</cite> (additionally, after <cite>git pull</cite>)</p></li>
<li><p><cite>git submodule update –init source/Grid/GridMain/AMR/Paramesh4/PM4_package</cite>
(variant of the previous item, in case you want to only get the Paramesh package submodule)</p></li>
</ul>
<p>This quick start example uses Paramesh for AMR and does not depend
on PETSc or Hypre. It also does not use accelerators or other devices on
the node, neither does it exercise advanced features of the
Orchestration System. It requires MPI and HDF5 installed, and runs using
one CPU per MPI rank.</p>
<p>Once you have the source code and all the necessary libraries installed
configure the Flash-X source tree for the Sedov explosion problem using
the <em>setup</em> command Type</p>
<blockquote>
<div><p><em>./setup Sedov -auto</em></p>
</div></blockquote>
<p>This configures Flash-X for the 2d <em>Sedov</em> problem using the default
hydrodynamic solver, equation of state, Grid unit, and I/O format
defined for this problem, linking all necessary files into a new
directory, called <em>object</em>. For the purpose of this example, we
will use the default I/O format, serial HDF5. In order to compile a
problem on a given machine Flash-X allows the user to create a file
called <em>Makefile.h</em> which sets the paths to compilers and libraries
specific to a given platform. This file is located in the directory
<em>sites/mymachine.myinstitution.mydomain/</em>. The setup script will
attempt to see if your machine/platform has a <em>Makefile.h already
created, and if so, this will be linked into the object directory.
If one is not created the setup script will use a prototype Makefile.h
with guesses as to the locations of libraries on your machine. The
current distribution includes prototypes for *Linux</em>, <em>OSX</em> operating
systems. In any case, it is advisable to create a Makefile.h
specific to your machine. See for details.</p>
<p>Type the command <em>cd object</em> to enter the object directory which was
created when you setup the Sedov problem, and then execute <em>make</em>.
This will compile the Flash-X code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="nb">object</span>
<span class="n">make</span>
</pre></div>
</div>
<p>If you have problems and need to recompile, <em>make clean</em> will remove
all object files from the object directory, leaving the source
configuration intact; <em>make realclean</em> will remove all files and
links from object. After ‘make realclean’, a new invocation of
setup is required before the code can be built. The building can
take a long time on some machines; doing a parallel build (make -j
for example) can significantly increase compilation speed, even on
single processor systems.</p>
<p>Assuming compilation and linking were successful, you should now find an
executable named <em>flashx</em> in the object directory. You may wish
to check that this is the case.</p>
<p>If compilation and linking were not successful, here are a few common
suggestions to diagnose the problem:</p>
<ul>
<li><p>Make sure the correct compilers are in your path, and that they
produce a valid executable.</p></li>
<li><p>The default Sedov problem uses HDF5 in serial. Make sure you have
HDF5 installed. If you do not have HDF5, you can still setup and
compile Flash-X, but you will not be able to generate either a
checkpoint or a plot file. You can setup Flash-X without I/O by
typing</p>
<blockquote>
<div><p><em>./setup Sedov -auto +noio</em></p>
</div></blockquote>
</li>
<li><p>Make sure the paths to the MPI and HDF libraries are correctly set in
the Makefile.h in the object directory.</p></li>
<li><p>Make sure your version of MPI creates a valid executable that can run
in parallel.</p></li>
</ul>
<p>Flash-X by default expects to find a text file named <em>flash.par</em> in
the directory from which it is run. This file sets the values of various
runtime parameters that determine the behavior of Flash-X. If it is not
present, Flash-X will abort; flash.par must be created in order for
the program to run (note: all of the distributed setups already come
with a flash.par which is <em>copied</em> into the object directory at
setup time). There is command-line option to use a different name for
this file, described in the next section. Here we will create a simple
flash.par that sets a few parameters and allows the rest to take on
default values. With your text editor, edit the flash.par in the
object directory so it looks like .</p>
<div class="shrink docutils container">
<div class="fcodeseg docutils container">
<p># runtime parameters</p>
<p>basenm = “<a href="#id3"><span class="problematic" id="id4">sedov_</span></a>”</p>
<p>lrefine_max = 5 refine_var_1 = “dens” refine_var_2 = “pres”</p>
<p>restart = .false. checkpointFileIntervalTime = 0.01</p>
<p>nend = 10000 tmax = 0.05</p>
<p>gamma = 1.4</p>
<p>xl_boundary_type = “outflow” xr_boundary_type = “outflow”</p>
<p>yl_boundary_type = “outflow” yr_boundary_type = “outflow”</p>
<p>plot_var_1 = “dens” plot_var_2 = “temp” plot_var_3 = “pres”</p>
<p>sim_profFileName = “/dev/null”</p>
</div>
</div>
<p>This example first instructs Flash-X to name output files appropriately
(through the <em>basenm</em> parameter). Flash-X is then instructed to use up
to five levels of adaptive mesh refinement (AMR) (through the
<em>lrefine_max</em> parameter), with the actual refinement adapted based on
the density and pressure of the solution (parameters <em>refine_var_1</em>
and <em>refine_var_2</em>). We will not be starting from a checkpoint file
(“<em>restart = .false.</em>” — this is the default, but here it is
explicitly set for clarity). Output files are to be written every 0.01
time units (<em>checkpointFileIntervalTime</em>) and will be created until
<span class="math notranslate nohighlight">\(t=0.05\)</span> or 10000 timesteps have been taken (<em>tmax</em> and <em>nend</em>
respectively), whichever comes first. The ratio of specific heats for
the gas (<em>gamma</em> = <span class="math notranslate nohighlight">\(\gamma\)</span>) is taken to be 1.4, and all four
boundaries of the two-dimensional grid have outflow (zero-gradient or
Neumann) boundary conditions (set via the [xyz][lr]_boundary_type parameters).</p>
<p>Note the format of the file – each line is of the form <em>variable</em> =
<em>value</em>, a comment (denoted by a hash mark, #), or a blank. String
values are enclosed in double quotes (“). Boolean values are
indicated in the FORTRAN style, .true. or .false.. Be sure to
insert a carriage return after the last line of text. A full list of the
parameters available for your current setup is contained in the file
<em>setup_params</em> located in the object directory, which also
includes brief comments for each parameter. If you wish to skip the
creation of a flash.par, a complete example is provided in the
<em>source/Simulation/SimulationMain/Sedov/</em> directory.</p>
</section>
<section id="running-flashx">
<h2>Running Flash-X<a class="headerlink" href="#running-flashx" title="Link to this heading"></a></h2>
<p>We are now ready to run Flash-X. To run Flash-X on <em>N</em> processors, type</p>
<blockquote>
<div><p><em>mpirun -np N ./flashx</em></p>
</div></blockquote>
<p>remembering to replace <em>N</em> with the appropriate values. Some
systems may require you to start MPI programs with a different command;
use whichever command is appropriate for your system. The Flash-X
executable accepts an optional command-line argument for the runtime
parameters file. If “<em>-par_file</em> <em>filename</em>” is present, Flash-X reads
the file specified on command line for runtime parameters, otherwise it
reads flash.par.</p>
<p>You should see a number of lines of output indicating that Flash-X is
initializing the Sedov problem, listing the initial parameters, and
giving the timestep chosen at each step. After the run is finished, you
should find several files in the current directory:</p>
<ul class="simple">
<li><p><em>sedov.log</em> echoes the runtime parameter settings and indicates the
run time, the build time, and the build machine. During the run, a
line is written for each timestep, along with any warning messages.
If the run terminates normally, a performance summary is written to
this file.</p></li>
<li><p><em>sedov.dat</em> contains a number of integral quantities as functions
of time: total mass, total energy, total momentum, <em>etc.</em> This file
can be used directly by plotting programs such as <em>gnuplot</em>; note
that the first line begins with a hash (#) and is thus ignored by
gnuplot.</p></li>
<li><p><em>sedov_hdf5_chk_000*</em> are the different checkpoint files. These are
complete dumps of the entire simulation state at intervals of
<em>checkpointFileIntervalTime</em> and are suitable for use in restarting
the simulation.</p></li>
<li><p><em>sedov_hdf5_plt_cnt_000*</em> are plot files. In this example, these
files contain density, temperature, and pressure in single precision.
If needed, more variables can be dumped in the plotfiles by
specifying them in <em>flash.par</em>. They are usually written more
frequently than checkpoint files, since they are the primary output
of Flash-X for analyzing the results of the simulation. They are also
used for making simulation movies. Checkpoint files can also be used
for analysis and sometimes it is necessary to use them since they
have comprehensive information about the state of the simulation at a
given time. However, in general, plotfiles are preferred since they
have more frequent snapshots of the time evolution. Please see for
more information about IO outputs.</p></li>
</ul>
<p>Flash-X is intended to be customized by the user to work with
interesting initial and boundary conditions. In the following sections,
we will cover in more detail the algorithms and structure of Flash-X and
the sample problems and tools distributed with it.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intro.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="arch.html" class="btn btn-neutral float-right" title="Overview of Flash-X architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Flash-X Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>