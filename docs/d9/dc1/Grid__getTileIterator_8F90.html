<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH-X: source/Grid/Grid_getTileIterator.F90 File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../flash-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">FLASH-X
   </div>
   <div id="projectbrief">Doxygen Generated Documentation From Interface Source Code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="../../dir_f636fe1aaafd6114c78ff18cf7dc516e.html">Grid</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle"><div class="title">Grid_getTileIterator.F90 File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a href="../../d9/dc1/Grid__getTileIterator_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ab688d46e7ed2b4ed6cff6212524e53fb"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dc1/Grid__getTileIterator_8F90.html#ab688d46e7ed2b4ed6cff6212524e53fb">Grid_getTileIterator</a> (itor, nodetype, level, tiling, tileSize, nthreads)</td></tr>
<tr class="separator:ab688d46e7ed2b4ed6cff6212524e53fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ab688d46e7ed2b4ed6cff6212524e53fb" name="ab688d46e7ed2b4ed6cff6212524e53fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab688d46e7ed2b4ed6cff6212524e53fb">&#9670;&nbsp;</a></span>Grid_getTileIterator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine Grid_getTileIterator </td>
          <td>(</td>
          <td class="paramtype">type(Grid_iterator_t)&#160;</td>
          <td class="paramname"><em>itor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>nodetype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, optional&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, optional&#160;</td>
          <td class="paramname"><em>tiling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>tileSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, optional&#160;</td>
          <td class="paramname"><em>nthreads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Construct an iterator for walking across a specific subset of blocks or tiles within the current octree structure. The iterator is already set to the first matching leaf block/tile.</p>
<p >Once finished, the iterator should be destroyed with Grid_releaseTileIterator</p>
<p >itor - the requested block/tile iterator nodetype - the class of blocks to iterate over. The options for AMReX are</p><ul>
<li>ALL_BLKS - all blocks</li>
<li>LEAF - only leaf blocks level - iterate only over leaf blocks/tiles located at this level of refinement. A level value of UNSPEC_LEVEL is equivalent to omitting this optional argument. tiling - an optional optimization hint. If TRUE, then the iterator will walk across all associated blocks on a tile-by-tile basis *if* the implementation supports this feature. If a value is not given, is FALSE, or the implementation does not support tiling, the iterator will iterate on a block-by-block basis. nthreads - an optional argument to change the behavior of the iterator in an OpenMP parallel region from the default. By default, if Grid_getTileIterator is called in an active parallel region, the iteration space will be divided up so that each thread will end up executing an approximately equal number of iterations, assuming that all threads will call the iterator's next() method repeatedly until isValid() returns FALSE. This is equivalent to what the MFIter of AMReX does when it is not in 'dynamic' mode, and is also very similar to the static scheduling of do / for looks by OpenMP. The described default behavior in an active parallel region is achieved by effectively modifying the default serial behavior in two ways: o Each thread begins iterating at a thread-specific starting index; o when the next() method is called in a thread, the index position advances not by 1 but by a number n. This number n is by default set to the return value of omp_get_num_threads(). If the optional argument 'nthreads' is present, n is set to this value. Moreover, if 'nthreads' is present, then the thread-specific starting index mentioned above will be set to 0 (zero-based convention) if it would otherwise exceed nthreads-1. This argument will only have and effect if all of the following are true: o The code is built with OpenMP support (-fopenmp copmiuler flag or similar, depending of compiler used). (This implies that preprocessor symbol _OPENMP is defined.) o Grid_getTileIterator is called in an active parallel region (i.e., omp_get_num_threads() return a value &gt; 1).</li>
</ul>
<p >NOTES</p>
<p >The described default behavior in an active parallel region makes sense in the following scenario: o The iterator object 'itor' is private to threads; o all threads active at the time of iterator construction will participate in iterations. There is, however, an alternative scenario where those characteristics do not hold true, and instead: o The iterator object 'itor' is shared by threads (or perhaps only the version belonging to one designated thread matters); o only one thread (or maybe a subset) iterates; other threads may be participating in computational work via OpenMP tasking constructs or by other means, but this division of labor, if it exists, is not visible to the iterator.</p>
<p >SEE ALSO <a class="el" href="../../d7/d6f/Grid__releaseTileIterator_8F90.html">Grid_releaseTileIterator.F90</a> </p>

<p class="definition">Definition at line <a class="el" href="../../d9/dc1/Grid__getTileIterator_8F90_source.html#l00089">89</a> of file <a class="el" href="../../d9/dc1/Grid__getTileIterator_8F90_source.html">Grid_getTileIterator.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 4 2022 17:05:05 for FLASH-X by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
